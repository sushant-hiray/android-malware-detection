from optparse import OptionParser
import os
import fnmatch

def extractapks(path):
    apkfiles = []
    fp = open("apk.txt","w")
    for root, dirnames, filenames in os.walk(path):
          for filename in fnmatch.filter(filenames, '*.apk'):
                    apkfiles.append(os.path.join(root, filename))
                    fp.write(os.path.join(root, filename))
                    fp.write("\n")
    fp.close()

if __name__ == '__main__':
    parser = OptionParser()
    parser.add_option("-a","--all", action="store_true", dest="all", default=None, help="Run the entire script")
    parser.add_option("-p", "--process", action="store_true", dest="process", default=None, help="Processing xmls")
    parser.add_option("-e", "--extract", action="store_true", dest="extract", default=None, help="Extractin xmls from apk")
    parser.add_option("-d", "--clean", action="store_true", dest="clean", default=None, help="Clean previous processed files")
    (options, args) = parser.parse_args()

    if options.all:
        options.process = options.extract = True

    if options.extract:
        print "Extracting apks"
        path="/home/sushant/"
        extractapks(path)
        print "Done extracting"

    if options.process:
        print "Processing all the apks"

    if options.clean:
        print "Cleaning Up"



