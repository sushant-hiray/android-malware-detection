from optparse import OptionParser
import os


def extractapks(path):
    files = []
    for f in os.listdir(path):
        files.append(f)
    fp = open("apk.txt","w")
    apkfiles=[]
    for f in files:
        fileName,fileExt = os.path.splittext(path + f)
        if(fileExt == ".apk"):
            apkfiles.append(f)
            fp.write(f)
            fp.write("\n")


if __name__ == '__main__':
    parser = OptionParser()
    parser.add_option("-a","--all", action="store_true", dest="all", default=None, help="Run the entire script")
    parser.add_option("-p", "--process", action="store_true", dest="process", default=None, help="Processing xmls")
    parser.add_option("-e", "--extract", action="store_true", dest="extract", default=None, help="Extractin xmls from apk")
    parser.add_option("-d", "--clean", action="store_true", dest="clean", default=None, help="Clean previous processed files")
    (options, args) = parser.parse_args()

    if options.all:
        options.process = opions.extract = True

    if options.extract:
        print "Extracting apks"
        path="/home/"
        extractapks(path)
        print "Done extracting"

    if options.process:
        print "Processing all the apks"

    if options.clean:
        print "Cleaning Up"



